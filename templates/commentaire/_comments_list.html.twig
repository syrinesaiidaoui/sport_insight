<div class="comments-section" style="margin-top: 0; clear: both;">
    <div style="margin-bottom: 24px;">
        <h2 style="font-size: 20px; font-weight: 700; color: var(--text-dark); margin-bottom: 4px;">ğŸ’¬ Commentaires</h2>
        <p style="color: var(--text-muted); font-size: 14px;">{{ annonce.commentaires|length }} commentaire(s)</p>
    </div>

    {% if annonce.commentaires|length > 0 %}
        <div class="comments-list" style="display: flex; flex-direction: column; gap: 16px;">
            {% for commentaire in annonce.commentaires|reverse %}
                <div class="comment-card" style="padding: 20px; background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 12px;">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                        <div style="flex: 1;">
                            <h4 style="font-weight: 600; color: var(--text-dark); margin-bottom: 4px;">
                                ğŸ‘¤ {{ commentaire.joueur.prenom }} {{ commentaire.joueur.nom }}
                            </h4>
                            <p style="font-size: 12px; color: var(--text-muted);">
                                ğŸ“… {{ commentaire.dateCommentaire ? commentaire.dateCommentaire|date('d/m/Y Ã  H:i') : 'N/A' }}
                            </p>
                        </div>
                        
                        {% if app.user and (app.user.id == commentaire.joueur.id or is_granted('ROLE_ADMIN')) %}
                            <div style="display: flex; gap: 8px; margin-left: 12px;">
                                <a href="{{ path('app_commentaire_edit', {'id': commentaire.id}) }}" 
                                   style="color: var(--primary); text-decoration: none; font-size: 13px; font-weight: 600; padding: 4px 8px; border-radius: 4px; hover: background: rgba(16, 185, 129, 0.1);">
                                    âœï¸ Ã‰diter
                                </a>
                                <form method="post" action="{{ path('app_commentaire_delete', {'id': commentaire.id}) }}" 
                                      style="display: inline;" 
                                      onsubmit="return confirm('ÃŠtes-vous sÃ»r?');">
                                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ commentaire.id) }}">
                                    <button type="submit" style="background: none; border: none; color: #ef4444; cursor: pointer; font-size: 13px; font-weight: 600; text-decoration: underline; padding: 4px 8px; margin: 0;">
                                        ğŸ—‘ï¸ Supprimer
                                    </button>
                                </form>
                            </div>
                        {% endif %}
                    </div>

                    <p style="color: var(--text-dark); line-height: 1.6; margin-bottom: 0; word-wrap: break-word; padding: 12px; background: rgba(16, 185, 129, 0.02); border-radius: 8px; border-left: 3px solid var(--primary);">
                        {{ commentaire.contenu }}
                    </p>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="front-card" style="padding: 40px; text-align: center; border: 2px dashed var(--border-color);">
            <p style="color: var(--text-muted); font-size: 14px; margin: 0;">ğŸ˜¶ Aucun commentaire pour le moment. Soyez le premier Ã  commenter!</p>
        </div>
    {% endif %}
</div>



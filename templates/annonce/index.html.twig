{% extends 'front_office/base.html.twig' %}

{% block title %}Annonces - FC Club{% endblock %}

{% block body %}
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <h1 class="section-title" style="margin-bottom: 0;">Annonces</h1>
        <div style="display: flex; gap: 12px; align-items: center;">
            <a href="{{ path('app_statistics') }}" class="btn btn-outline-secondary" style="padding: 10px 20px; font-size: 14px; text-decoration: none; border: 1px solid #cbd5e1; color: #475569; border-radius: 8px; font-weight: 600; display: flex; align-items: center; gap: 6px;">üìä Statistiques</a>
            <a href="{{ path('app_annonce_new') }}" class="btn btn-primary" style="padding: 10px 20px; font-size: 14px; text-decoration: none; display: inline-block;">+ Cr√©er une annonce</a>
        </div>
    </div>

    <!-- FILTRES ET TRI -->
    <div style="margin-bottom: 30px; padding: 20px; background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 12px;">
        <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 16px; color: var(--text-dark);">üîç Filtres & Tri</h3>
        
        <form method="get" action="{{ path('app_annonce_index') }}" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; align-items: flex-end;">
            <div>
                <label for="titre" style="display: block; margin-bottom: 8px; color: var(--text-dark); font-weight: 600; font-size: 14px;">Rechercher par titre</label>
                <input type="text" id="titre" name="titre" value="{{ app.request.query.get('titre', '') }}" placeholder="Ex: Cherche attaquant" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 14px;">
            </div>

            <div>
                <label for="niveau" style="display: block; margin-bottom: 8px; color: var(--text-dark); font-weight: 600; font-size: 14px;">Niveau requis</label>
                <select id="niveau" name="niveau" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 14px;">
                    <option value="">Tous les niveaux</option>
                    <option value="D√©butant" {% if app.request.query.get('niveau') == 'D√©butant' %}selected{% endif %}>D√©butant</option>
                    <option value="Interm√©diaire" {% if app.request.query.get('niveau') == 'Interm√©diaire' %}selected{% endif %}>Interm√©diaire</option>
                    <option value="Avanc√©" {% if app.request.query.get('niveau') == 'Avanc√©' %}selected{% endif %}>Avanc√©</option>
                    <option value="Expert" {% if app.request.query.get('niveau') == 'Expert' %}selected{% endif %}>Expert</option>
                </select>
            </div>

            <div>
                <label for="sort" style="display: block; margin-bottom: 8px; color: var(--text-dark); font-weight: 600; font-size: 14px;">Trier par</label>
                <select id="sort" name="sort" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 14px;">
                    <option value="recent" {% if app.request.query.get('sort') != 'alpha' %}selected{% endif %}>Plus r√©cent</option>
                    <option value="alpha" {% if app.request.query.get('sort') == 'alpha' %}selected{% endif %}>Alphab√©tique A-Z</option>
                </select>
            </div>

            <div style="display: flex; gap: 8px;">
                <button type="submit" style="flex: 1; padding: 10px 16px; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">Filtrer</button>
                <a href="{{ path('app_annonce_index') }}" style="padding: 10px 16px; background: var(--border-color); color: var(--text-dark); border: none; border-radius: 8px; font-weight: 600; cursor: pointer; text-decoration: none; display: inline-block;">R√©initialiser</a>
            </div>
        </form>
    </div>

    {% if annonces|length > 0 %}
        <div class="row" style="display: flex; flex-wrap: wrap; gap: 32px; justify-content: flex-start;">
            {% for annonce in annonces %}
                <div class="front-card" style="flex: 1 1 350px; min-width: 320px; max-width: 400px; margin-bottom: 32px; background: #fff; border: 1px solid #e2e8f0;">
                    <div class="card-body">
                        <h3 style="font-size: 22px; font-weight: 700; color: #1e293b; margin-bottom: 8px;">{{ annonce.titre }}</h3>
                        <p style="color: #64748b; font-size: 13px; margin-bottom: 16px;">Publi√© le {{ annonce.datePublication ? annonce.datePublication|date('d/m/Y') : 'N/A' }}</p>
                        
                        <div style="margin-bottom: 16px; padding: 12px; background: #f8fafc; border-radius: 12px; border: 1px solid #e2e8f0;">
                            <div style="margin-bottom: 6px;"><span style="color: #64748b; font-size: 13px;">Poste :</span> <strong style="color: #1e293b;">{{ annonce.posteRecherche }}</strong></div>
                            <div><span style="color: #64748b; font-size: 13px;">Niveau :</span> <strong style="color: #1e293b;">{{ annonce.niveauRequis }}</strong></div>
                        </div>

                        <div style="margin-bottom: 16px;">
                            {% if annonce.statut == 'active' %}
                                <span class="badge-success">Actif</span>
                            {% elseif annonce.statut == 'inactive' %}
                                <span class="badge-warning">Inactif</span>
                            {% else %}
                                <span class="badge-warning">{{ annonce.statut }}</span>
                            {% endif %}
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <a href="{{ path('app_annonce_show', {'id': annonce.id}) }}" class="btn btn-primary" style="flex: 1; text-align: center; text-decoration: none; color: #fff;">Voir D√©tails</a>
                            <a href="{{ path('app_annonce_edit', {'id': annonce.id}) }}" class="btn btn-outline-secondary" style="border-radius: 10px; padding: 10px 16px; text-decoration: none; font-weight: 600; font-size: 14px; border: 1px solid #cbd5e1; color: #475569;">√âditer</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="front-card" style="text-align: center; padding: 60px 40px;">
            <p style="color: var(--text-muted); font-size: 16px;">Aucune annonce trouv√©e</p>
        </div>
    {% endif %}
{% endblock %}
